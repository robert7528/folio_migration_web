#!/bin/bash
# FOLIO environment setup template
#
# Usage:
#   1. Copy this file for your client:
#      cp tools/folio_env.sh.example tools/folio_env_thu.sh
#   2. Fill in the actual values
#   3. Source it before using CLI tools:
#      source tools/folio_env_thu.sh
#
# Note: tools/folio_env_*.sh is in .gitignore â€” your credentials won't be committed.

export FOLIO_URL="https://okapi.example.com"
export FOLIO_TENANT="your_tenant_id"
export FOLIO_USER="admin_user"
export FOLIO_PASSWORD=""

# Auto-acquire token
export FOLIO_TOKEN=$(curl -s -X POST "${FOLIO_URL}/authn/login" \
  -H "Content-Type: application/json" \
  -H "x-okapi-tenant: ${FOLIO_TENANT}" \
  -d "{\"username\":\"${FOLIO_USER}\",\"password\":\"${FOLIO_PASSWORD}\"}" \
  -D - 2>/dev/null | grep -i "x-okapi-token" | tr -d '\r' | awk '{print $2}')

if [ -n "$FOLIO_TOKEN" ]; then
  echo "FOLIO_TOKEN=${FOLIO_TOKEN:0:20}..."
else
  echo "WARNING: Failed to acquire FOLIO token"
fi
